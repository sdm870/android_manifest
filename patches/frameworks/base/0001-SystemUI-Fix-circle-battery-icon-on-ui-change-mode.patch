From 509a63c10aa23e4dd68bb5ed73d89b62cbcaf4b8 Mon Sep 17 00:00:00 2001
From: althafvly <althafvly@gmail.com>
Date: Thu, 7 Jul 2022 11:27:32 +0530
Subject: [PATCH] SystemUI: Fix circle battery icon on ui change mode

Change-Id: Id90f85e47ce4b9811e9bb67b91169997020300d8
---
 .../systemui/battery/BatteryMeterViewController.java      | 8 ++++++++
 1 file changed, 8 insertions(+)

diff --git a/packages/SystemUI/src/com/android/systemui/battery/BatteryMeterViewController.java b/packages/SystemUI/src/com/android/systemui/battery/BatteryMeterViewController.java
index f7355e651f31..804dc544ebef 100644
--- a/packages/SystemUI/src/com/android/systemui/battery/BatteryMeterViewController.java
+++ b/packages/SystemUI/src/com/android/systemui/battery/BatteryMeterViewController.java
@@ -53,6 +53,14 @@ public class BatteryMeterViewController extends ViewController<BatteryMeterView>
 
     private final ConfigurationController.ConfigurationListener mConfigurationListener =
             new ConfigurationController.ConfigurationListener() {
+                @Override
+                public void onUiModeChanged() {
+					if (BatteryMeterView.STATUS_BAR_BATTERY_STYLE.equals(
+                            BatteryMeterView.BATTERY_STYLE_CIRCLE)) {
+                        mView.scaleBatteryMeterViews();
+					}
+                }
+
                 @Override
                 public void onDensityOrFontScaleChanged() {
                     mView.scaleBatteryMeterViews();
-- 
2.25.1

